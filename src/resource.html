<!DOCTYPE html>
<html lang="en">
	@@include('html/head.html',{
	"title":"Resources"
	})
	<body>
		<div class="wrapper">
			@@include('html/header.html',{})
			<main class="main">
				<section class="main__top main-top">
                    <div class="main-top__container">
                        <h1 class="main-top__title  _anim-items"><span>Discover Resources</span></h1>
                    </div>
                </section>
				<section class="main__resources main-resources">
					<div class="main-resources__container">
						<h1 class="main-resources__title">
							<span>Corporation</span> Tax Calculator
						</h1>
						<div class="main-resources__content">
							<p><strong>Calculate your corporation tax liability based on your net profits</strong></p>
							<p>You can use this calculator to find out how much corporation tax your limited company will be liable for, which is based on your net profit before taxes.</p>
							<p><strong>From 1 April 2023 the Corporation Tax rate changes to:</strong></p>
							<ul>
								<li>
									19% for taxable profits below £50,000 (small profit rate)
								</li>
								<li>
									25% for taxable profits above £250,000 (main rate)
								</li>
							</ul>
							<p>Marginal Relief provides a gradual increase in Corporation Tax rate between the small profits rate and the main rate — this allows you to reduce your rate from the 25% main rate.</p>
						</div>
					</div>
				</section>

				<div class="main__tax main-tax">
					<div class="main-tax__container">
						<div class="main-tax__body">
							<div class="main-tax__header tax-header">
								<div class="tax-header__logo">
									<img width="152" height="32" src="@img/logo/logo-tax.png" alt="Logo">
								</div>
								<p class="tax-header__text">Corporation Tax Calculator</p>
							</div>
							<div class="main-tax__form tax-form">
								<div class="tax-form__item">
								  <label for="tax-currency" class="tax-form__label">Net profit before tax:</label>
								  <div class="tax-form-input">
									<div class="tax-form-input__currency">
									  <img width="13" height="17" src="@img/currency.png" alt="currency">
									</div>
									<input id="tax-currency" type="text" class="tax-form__input">
								  </div>
								</div>
								<div class="tax-form__item">
								  <label for="tax-year" class="tax-form__label">Corporation Tax:</label>
								  <div class="tax-form-input">
									<div class="tax-form-input__currency">
									  <img width="13" height="17" src="@img/currency.png" alt="currency">
									</div>
									<input id="tax-year" type="text" readonly class="tax-form__input">
								  </div>
								</div>
							  </div>
							  <div class="main-tax__buttons">
								<button id="calculate-tax" type="submit" class="button" disabled>
								  Calculate
								</button>
							  </div>
							  
							  <script>
								const inputField = document.getElementById('tax-currency');
								const calculateButton = document.getElementById('calculate-tax');
							  
								
								function validateInput() {
								  const value = parseFloat(inputField.value.replace(/,/g, ''));
								  if (!isNaN(value) && value > 0) {
									calculateButton.disabled = false;
								  } else {
									calculateButton.disabled = true;   
								  }
								}
							  
								
								inputField.addEventListener('input', function(event) {
						
								  const value = event.target.value.replace(/,/g, '').replace(/[^\d.]/g, '');
								  
								  
								  const formattedValue = Number(value).toLocaleString('en-GB');
								  event.target.value = formattedValue;
							  
								  validateInput();
								});
							  
								
								inputField.addEventListener('keydown', function(event) {
								  if (event.key === 'Enter' && !calculateButton.disabled) {
									event.preventDefault();
									calculateTax();
								  }
								});
							  
								function calculateTax() {
								  const profitBeforeTax = parseFloat(inputField.value.replace(/,/g, ''));
								  if (isNaN(profitBeforeTax) || profitBeforeTax <= 0) {
									return;  
								  }
							  
								  const lowerRateLimit = 50000;
								  const higherRateLimit = 250000;
								  const lowerRate = 0.19;
								  const higherRate = 0.25;
								  const marginalReliefFraction = 0.015;
							  
								  let taxAmount;
							  
								  if (profitBeforeTax <= lowerRateLimit) {
									taxAmount = profitBeforeTax * lowerRate;
								  } else if (profitBeforeTax > lowerRateLimit && profitBeforeTax <= higherRateLimit) {
									const marginalRelief = (higherRateLimit - profitBeforeTax) * marginalReliefFraction;
									taxAmount = profitBeforeTax * higherRate - marginalRelief;
								  } else {
									taxAmount = profitBeforeTax * higherRate;
								  }
							  
								 
								  const formattedTax = taxAmount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
								  document.getElementById('tax-year').value = formattedTax;
								}
							  
							
								calculateButton.addEventListener('click', function(event) {
								  event.preventDefault();
								  calculateTax();
								});
							  
								
								document.addEventListener('DOMContentLoaded', validateInput);
							  </script>
							  
							
							  
						</div>
					</div>
				</div>
				<section class="main__top main-top">
                    <div class="main-top__container">
                        <h1 class="main-top__title  _anim-items"><span>Our Blog</span></h1>
                    </div>
                </section>

				<div class="main__list-post post-list">
					<div class="post-list__container">
						<div class="post-list__item">
							<a href="blog.html" class="post-list__link">
								<div class="post-list__image">
									<img src="@img/main-block/image-blog.png" alt="Image">
								</div>
								<h2 class="post-list__title">
									Is It Time for Your Business to Hire a Fractional CFO?
								</h2>
							</a>
						</div>
						<div class="post-list__item">
							<a href="blog.html" class="post-list__link">
								<div class="post-list__image">
									<img src="@img/main-block/image-blog.png" alt="Image">
								</div>
								<h2 class="post-list__title">
									Is It Time for Your Business to Hire a Fractional CFO?
								</h2>
							</a>
						</div>
						<div class="post-list__item">
							<a href="blog.html" class="post-list__link">
								<div class="post-list__image">
									<img src="@img/main-block/image-blog.png" alt="Image">
								</div>
								<h2 class="post-list__title">
									Is It Time for Your Business to Hire a Fractional CFO?
								</h2>
							</a>
						</div>
					</div>
				</div>
			</main>
			@@include('html/footer.html',{})
		</div>
		<script src="js/app.min.js"></script>
	</body>
</html>